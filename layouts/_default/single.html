{{ partial "header.html" . }}

<div class="container">
  <article>
    <div class="article-meta">

      <div class="categories">
        {{ range $i, $e := .Params.categories }}
          {{ if $i }} &hercon; {{ end }}<a href="{{ relURL (print "/categories/" $e | urlize) }}">{{ $e }}</a>
        {{ end }}
      </div>

      <h1><span class="title">{{ .Title }}</span></h1>

      {{ if .Params.author }}
        <h3 class="author">{{ partial "author_names.html" . }}</h3>
      {{ end }}

      {{ with .Params.tags }}
        <p>
          {{ default "Tags: " (index $.Site.Params.text "tags") }}
          {{ range $i, $e := . }}
            {{ if $i }}; {{ end }}
            <a href="{{ relURL (print "/tags/" ($e | urlize)) }}">{{ $e }}</a>
          {{ end }}
        </p>
      {{ end }}

      {{ partial "meta.html" . }}
    </div>

    {{ if .Params.toc }}
      {{ .TableOfContents }}
    {{ end }}

    <main>

      {{/* ✅ 본문 상단 대표 이미지 강제 출력 부분 */}}
      {{ with .Params.thumbnail }}
        <div class="single-thumbnail">
          <img src="{{ . | relURL }}" alt="{{ $.Title }}" />
        </div>
      {{ end }}

      {{/* 필요하면 image도 함께 지원 */}}
      {{ if (and (not .Params.thumbnail) .Params.image) }}
        <div class="single-thumbnail">
          <img src="{{ .Params.image | relURL }}" alt="{{ .Title }}" />
        </div>
      {{ end }}

      {{ .Content }}

      {{ partial "newsletter.html" . }}
    </main>

<div class="post-bottom"
     style="max-width:760px;margin:18px auto 0;display:flex;flex-direction:column;gap:14px;">

  <!-- 운영자 + 고지: 2컬럼 -->
  <div class="post-bottom-grid"
       style="display:flex;gap:12px;flex-wrap:wrap;">
    <div style="flex:1 1 320px;">
      {{ partial "author.html" . }}
    </div>
    <div style="flex:1 1 320px;">
      {{ partial "info.html" . }}
    </div>
  </div>

  {{ if ne .Params.showPrevNext false }}
    {{ partial "prev_next.html" . }}
  {{ end }}

  <!-- 댓글은 필요할 때만 노출 -->
  {{ partial "comments.html" . }}
</div>
  </article>
</div>

{{ partial "footer.html" . }}
